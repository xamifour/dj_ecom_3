{% load i18n %}
{% load static %}


{% if request.user.is_authenticated %}
  <!-- Open Ticket Modal-->
  <form class="needs-validation modal fade" method="post" id="open-ticket" tabindex="-1" novalidate>
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Submit new ticket</h4>
          <button class="close" type="button" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        </div>
        <div class="modal-body">
          <p class="text-muted">We normally respond tickets within 2 business days.</p>
          <div class="form-group">
            <label for="ticket-subject">Subject</label>
            <input class="form-control" type="text" id="ticket-subject" required>
            <div class="invalid-feedback">Please fill in the subject line!</div>
          </div>
          <div class="row">
            <div class="col-sm-6">
              <div class="form-group">
                <label for="ticket-type">Type</label>
                <select class="form-control custom-select" id="ticket-type" required>
                  <option value>Choose type</option>
                  <option value="Website problem">Website problem</option>
                  <option value="Partner request">Partner request</option>
                  <option value="Complaint">Complaint</option>
                  <option value="Info inquiry">Info inquiry</option>
                </select>
                <div class="invalid-feedback">Please choose ticket type!</div>
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-group">
                <label for="ticket-priority">Priority</label>
                <select class="form-control custom-select" id="ticket-priority" required>
                  <option value>How urgent is your issue?</option>
                  <option value="Urgent">Urgent</option>
                  <option value="High">High</option>
                  <option value="Medium">Medium</option>
                  <option value="Low">Low</option>
                </select>
                <div class="invalid-feedback">Please choose how urgent your ticket is!</div>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label for="ticket-description">Describe your issue</label>
            <textarea class="form-control" id="ticket-description" rows="8" required></textarea>
            <div class="invalid-feedback">Please provide ticket description!</div>
          </div>
          <div class="custom-file mb-3">
            <input class="custom-file-input" type="file" id="file-input">
            <label class="custom-file-label" for="file-input">Choose file...</label>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary" type="submit">Submit Ticket</button>
        </div>
      </div>
    </div>
  </form>
{% endif %}

<div>
  <!-- Shop sidebar-->
  <div class="offcanvas-sidebar">
    <div class="offcanvas-sidebar-toggle"><span class="toggle-knob"><i data-feather="chevrons-right"></i>Sidebar</span></div>
    <div class="offcanvas-sidebar-body">
      <div class="offcanvas-sidebar-body-inner">  
        <div class="widget widget-categories mb-4 py-1">
          <h3 class="widget-title">Links List</h3>
          <ul class="nav nav-pills flex-column">
            {% block standard_tabs %}
              {% include 'oscar/customer/partials/standard_tabs.html' %}
            {% endblock %}
          </ul>
          <ul id="shopCategories">
            {# Others goes here #}
          </ul>
        </div>
        <div class="" id="UserPicture">
        <!-- Customer picture-->
          <a class="gallery-item mb-grid-gutter mx-auto" href="#" style="max-width: 18.75rem;"><img src="{% static 'oscar/img/account/customer-lg.jpg' %}" alt="Photo">
            <div class="gallery-caption">
              <div class="gallery-indicator"><i class="gallery-indicator-icon" data-feather="refresh-ccw"></i></div>Change profile picture
            </div>
          </a>
          <!-- Technical support + Tickets (visible Desktop)-->
          <div class="d-none d-lg-block">
            <h6 class="font-size-sm mb-3 pb-2 border-bottom">Technical support</h6>
            <ul class="list-unstyled">
              <li class="font-size-sm mb-2"><i class="text-muted mr-2" data-feather="mail" style="width: .875rem; height: .875rem;"></i><a class="nav-link-inline" href="mailto:support@example.com">{{user.email}}</a></li>
              <li class="font-size-sm mb-2"><i class="text-muted mr-2" data-feather="phone" style="width: .875rem; height: .875rem;"></i><a class="nav-link-inline" href="tel:+100331697720">+1 00 33 169 7720</a></li>
              <li class="font-size-sm mb-2"><i class="text-muted mr-2" data-feather="clock" style="width: .875rem; height: .875rem;"></i>1-2 business days</li>
            </ul>
            <div class="pt-2"><a class="btn btn-outline-secondary btn-sm btn-block" href="#"><i class="mr-1" data-feather="tag"></i>My tickets (1)</a><a class="btn btn-success btn-sm btn-block" href="#" data-toggle="modal" data-target="#open-ticket">Submit new ticket</a></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>